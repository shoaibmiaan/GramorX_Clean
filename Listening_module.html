Alright, hereâ€™s your **Listening Module Master TODO** with:

* âœ… **Checkboxes**
* ðŸ”¥ **Per-file responsibility**
* ðŸŽ¯ **Priority tag** (`P0 / P1 / P2`)

Legend:

* **P0** = Must for Listening v1 go-live (Learning basic + Practice + Full Mock CBE + minimal analytics)
* **P1** = Strongly recommended for v1.1 (better analytics, admin, game, nicer UX)
* **P2** = Nice to have / phase 2 polish

Design vibe is still aligned with your UI concept page.

---

## ðŸ§¾ docs/ â€” Specs & Audit

```txt
[ ] P0 docs/specs/listening_module_spec.md
    â†’ Canonical spec for Listening: flows, timers, UX rules, scoring, edge cases.

[ ] P0 docs/audit/listening_go_live_checklist.md
    â†’ Go-live checklist: audio loading, timing, RLS, auth, mobile checks, perf, accessibility.

[ ] P1 docs/mobile/listening_mobile_flow.md
    â†’ Mobile-specific UX: nav pattern, audio behaviour, small screen layouts, offline notes.
```

---

## ðŸ§  lib/listening/ â€” Logic, Types, Brain

```txt
[ ] P0 lib/listening/types.ts
    â†’ Shared TS types for tests, sections, questions, attempts, answers, analytics slices.

[ ] P0 lib/listening/constants.ts
    â†’ Constants: question types, default timers, scoring thresholds, section order.

[ ] P0 lib/listening/tests.ts
    â†’ Fetch helpers to load tests (practice + mock) from Supabase / APIs, with typing.

[ ] P0 lib/listening/attempts.ts
    â†’ Start/submit/auto-save helpers for attempts (wrap pages/api/listening/* routes).

[ ] P0 lib/listening/analytics.ts
    â†’ Band estimation, accuracy by question type, time-per-section calculations.

[ ] P1 lib/listening/game.ts
    â†’ Game scoring rules, challenge difficulty, reward logic for game mode.

[ ] P1 lib/listening/audio.ts
    â†’ Build audio URLs, preload, handle errors/fallbacks (e.g. missing audio, retry).
```

### Hooks

```txt
[ ] P0 lib/hooks/useListeningTestRunner.ts
    â†’ Core hook for run pages (practice + mock): current question, answers state, navigation, submit.

[ ] P1 lib/hooks/useListeningGame.ts
    â†’ State machine for game challenge mode: rounds, score, streak, timer.
```

---

## ðŸŽ¨ components/listening/ â€” Pure UI

### General

```txt
[ ] P0 components/listening/ListeningModuleHero.tsx
    â†’ Hero/header for /listening: short overview + CTAs (Practice, Mock, Analytics).

[ ] P0 components/listening/ListeningNavTabs.tsx
    â†’ Tabs to switch between Learn / Practice / Game / Mock / Analytics inside /listening.

[ ] P1 components/listening/ListeningInfoBanner.tsx
    â†’ Info banner for tips, upcoming tests, or "resume last attempt".
```

### Learning

```txt
[ ] P1 components/listening/Learning/ListeningLessonCard.tsx
    â†’ Card UI for lessons (title, skill, level, duration) in /listening/learn.

[ ] P1 components/listening/Learning/ListeningLessonLayout.tsx
    â†’ Layout wrapper for lesson page: content column + tips/CTA sidebar.

[ ] P1 components/listening/Learning/ListeningTipCallout.tsx
    â†’ Highlighted tip boxes (do/donâ€™t, exam hacks) used inside lesson content.

[ ] P1 components/listening/Learning/ListeningQuestionTypeCard.tsx
    â†’ Visual tiles for question types (MCQ, matching, map, etc.).
```

### Practice

```txt
[ ] P0 components/listening/Practice/PracticeTestCard.tsx
    â†’ Card listing a practice test: difficulty, #questions, est. time, last score.

[ ] P0 components/listening/Practice/PracticeQuestionList.tsx
    â†’ Renders question list for practice test (with proper numbering & grouping).

[ ] P0 components/listening/Practice/PracticeAnswerInput.tsx
    â†’ Answer controls for practice (inputs, radios, dropdowns based on question type).

[ ] P0 components/listening/Practice/PracticeResultSummary.tsx
    â†’ Result page component: raw score, band estimate, per-section accuracy summary.
```

### Game

```txt
[ ] P1 components/listening/Game/GameModeCard.tsx
    â†’ Cards at /listening/game: mode description, difficulty, rewards.

[ ] P1 components/listening/Game/GameChallengeHUD.tsx
    â†’ On-screen HUD for game: timer, score, streak, question counter.

[ ] P1 components/listening/Game/GameTimer.tsx
    â†’ Simple compact timer component used by game HUD.

[ ] P1 components/listening/Game/GameLeaderboardTable.tsx
    â†’ Leaderboard with username, score, rank, attempt time.

[ ] P2 components/listening/Game/GameRewardBadge.tsx
    â†’ Badge UI for achievements (â€œFast Earâ€, â€œPerfect Scoreâ€, etc.).
```

### Mock (Full CBE Exam)

```txt
[ ] P0 components/listening/Mock/MockOverviewStats.tsx
    â†’ On mock overview page: previous attempts, best band, average score, next recommended test.

[ ] P0 components/listening/Mock/MockInstructions.tsx
    â†’ Instruction panel: rules, no-pause audio, timing, environment requirements.

[ ] P0 components/listening/Mock/MockTestShell.tsx
    â†’ Main layout for /mock/listening/run: audio player area + question panel + timer bar.

[ ] P0 components/listening/Mock/MockSectionNavigator.tsx
    â†’ Section tabs + question navigator grid (1â€“40 jump, highlight answered/flagged).

[ ] P0 components/listening/Mock/MockQuestionRenderer.tsx
    â†’ Renders each question type correctly for the mock test (including maps, matching, etc.).

[ ] P0 components/listening/Mock/MockTimer.tsx
    â†’ Countdown timer with warnings and â€œtime upâ€ behavior.

[ ] P0 components/listening/Mock/MockAnswerSheet.tsx
    â†’ Side panel or modal showing all answers in one sheet before final submit.

[ ] P0 components/listening/Mock/MockReviewSummary.tsx
    â†’ Post-submission detailed summary: band, sections, wrong answers overview, next steps.

[ ] P1 components/listening/Mock/MockQuestionFlag.tsx
    â†’ Flag/bookmark toggle per question for â€œReview laterâ€.
```

### Analytics

```txt
[ ] P0 components/listening/Analytics/ListeningAnalyticsOverview.tsx
    â†’ High-level dashboard widget composition: band, attempts, weak areas.

[ ] P1 components/listening/Analytics/BandTrajectoryChart.tsx
    â†’ Chart component: band score over time across attempts.

[ ] P1 components/listening/Analytics/QuestionTypeBreakdownChart.tsx
    â†’ Chart: accuracy by question type (MCQ, map, etc.).

[ ] P1 components/listening/Analytics/TimeManagementChart.tsx
    â†’ Chart: time per section, time-per-question heat.

[ ] P1 components/listening/Analytics/AttemptsHistoryTable.tsx
    â†’ Table: all attempts with date, score, band, type (practice/mock).
```

---

## ðŸŒ pages/listening/ â€” Student Routes

```txt
[ ] P0 pages/listening/index.tsx
    â†’ Listening home: hero, module tabs, quick access tiles (Practice, Mock, Analytics).
```

### Learning

```txt
[ ] P1 pages/listening/learn/index.tsx
    â†’ Lists all lessons & question-type guides with filters (level, focus).

[ ] P1 pages/listening/learn/[slug].tsx
    â†’ Single lesson page: theory, examples, mini drill, CTA to practice/mock.
```

### Practice

```txt
[ ] P0 pages/listening/practice/index.tsx
    â†’ Lists all practice tests: with filters (length, difficulty, skill focus).

[ ] P0 pages/listening/practice/[testSlug].tsx
    â†’ Full practice runner: audio + questions using useListeningTestRunner.

[ ] P0 pages/listening/practice/[testSlug]/result.tsx
    â†’ Result screen: uses PracticeResultSummary + basic analytics.
```

### Game

```txt
[ ] P1 pages/listening/game/index.tsx
    â†’ Game modes overview (Fast Ear, Clip Guess, etc.) with GameModeCard.

[ ] P1 pages/listening/game/challenge.tsx
    â†’ Main challenge mode run page compatible with useListeningGame.

[ ] P2 pages/listening/game/leaderboard.tsx
    â†’ Public leaderboard for game scores with filters.
```

### Analytics

```txt
[ ] P0 pages/listening/analytics/index.tsx
    â†’ Userâ€™s main listening analytics page using ListeningAnalyticsOverview.

[ ] P1 pages/listening/analytics/[attemptId].tsx
    â†’ Deep dive into a specific attempt (question-level breakdown).
```

---

## ðŸŽ§ pages/mock/listening/ â€” Full Exam Flow

```txt
[ ] P0 pages/mock/listening/index.tsx
    â†’ Mock module landing: list of full listening mock tests + attempt history.

[ ] P0 pages/mock/listening/overview.tsx
    â†’ Pre-test overview: requirements, device checks, â€œStart testâ€ to create attempt.

[ ] P0 pages/mock/listening/run.tsx
    â†’ Core CBE run page (ties together MockTestShell, Navigator, Timer, Renderer, autosave).

[ ] P0 pages/mock/listening/submitted.tsx
    â†’ Post-submission success page: band score, brief breakdown, CTA to analytics.
```

---

## ðŸ›  pages/admin/listening/ â€” Internal Tools

```txt
[ ] P1 pages/admin/listening/index.tsx
    â†’ Admin dashboard overview: total tests, attempts, avg bands, quick links.

[ ] P1 pages/admin/listening/tests.tsx
    â†’ CRUD UI for listening tests: create/edit test, sections, questions.

[ ] P1 pages/admin/listening/attempts.tsx
    â†’ Searchable attempt list (date range, user, type, score).

[ ] P2 pages/admin/listening/question-bank.tsx
    â†’ Master bank management: search + bulk edit/filter question bank.
```

---

## ðŸ”Œ API â€” Student-facing

### Tests

```txt
[ ] P0 pages/api/listening/tests/list.ts
    â†’ GET: list listening tests (practice + mock meta) based on filters.

[ ] P0 pages/api/listening/tests/detail.ts
    â†’ GET: full test structure by slug/id (sections + questions).
```

### Practice

```txt
[ ] P0 pages/api/listening/practice/start.ts
    â†’ POST: create practice attempt row; returns attemptId + config.

[ ] P0 pages/api/listening/practice/submit.ts
    â†’ POST: submit answers, compute score, store analytics snapshot.
```

### Mock

```txt
[ ] P0 pages/api/listening/mock/tests.ts
    â†’ GET: available full mock tests for the user (respect plan, PIN gate at /mock scope).

[ ] P0 pages/api/listening/mock/start.ts
    â†’ POST: create mock attempt (locked to specific test + user + time window).

[ ] P0 pages/api/listening/mock/submit.ts
    â†’ POST: final submission of mock: score, band, store analytics.

[ ] P0 pages/api/listening/mock/autosave.ts
    â†’ POST: periodic partial saves for answers + remaining time.
```

### Analytics (student)

```txt
[ ] P0 pages/api/listening/analytics/summary.ts
    â†’ GET: compact summary for dashboard (avg band, attempts count, trend).

[ ] P1 pages/api/listening/analytics/by-question-type.ts
    â†’ GET: accuracy per question type for current user.

[ ] P1 pages/api/listening/analytics/attempts.ts
    â†’ GET: paginated list of userâ€™s listening attempts.

[ ] P1 pages/api/listening/analytics/attempt-detail.ts
    â†’ GET: detailed attempt info including question-level results.
```

---

## ðŸ” API â€” Admin-facing

```txt
[ ] P1 pages/api/admin/listening/tests/upsert.ts
    â†’ POST: create/update listening tests & sections; guarded by withPlan + admin roles.

[ ] P1 pages/api/admin/listening/tests/delete.ts
    â†’ POST: soft-delete / archive tests.

[ ] P1 pages/api/admin/listening/question-bank/import.ts
    â†’ POST: bulk import questions from CSV/JSON.

[ ] P1 pages/api/admin/listening/question-bank/export.ts
    â†’ GET: export question bank for backup/editing.

[ ] P1 pages/api/admin/listening/analytics/overview.ts
    â†’ GET: global admin analytics (usage, average bands, tests per day).
```

---

If you want, next step I can do is:

> **â€œGive me all P0 files grouped by build orderâ€**
> so you can knock out Listening v1 in a clean sequence.
